
import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;
void main() {
runApp(const MyApp());
}
class MyApp extends StatelessWidget {
const MyApp({super.key});
@override
Widget build(BuildContext context) {
return MaterialApp(
title: 'Fetch Data Example',
debugShowCheckedModeBanner: false,
theme: ThemeData(primarySwatch: Colors.teal),
home: const UserListScreen(),
);
}
}
class UserListScreen extends StatefulWidget {
const UserListScreen({super.key});
@override
State<UserListScreen> createState() => _UserListScreenState();
}
class _UserListScreenState extends State<UserListScreen> {
List<dynamic> users = [];
bool isLoading = true;
Future<void> fetchUsers() async {
const String url = "https://jsonplaceholder.typicode.com/users";
try {
final response = await http.get(Uri.parse(url));
if (response.statusCode == 200) {
final List<dynamic> data = jsonDecode(response.body);
setState(() {
users = data;
isLoading = false;
});
} else {
throw Exception('Failed to load users');
}
} catch (error) {
setState(() => isLoading = false);
print('Error fetching data: $error');
}
}
@override
void initState() {
super.initState();
fetchUsers();
}
@override
Widget build(BuildContext context) {
return Scaffold(
appBar: AppBar(
title: const Text('User List from API'),
centerTitle: true,
),
body: isLoading
? const Center(child: CircularProgressIndicator())
: ListView.builder(
itemCount: users.length,
itemBuilder: (context, index) {
final user = users[index];
return Card(
margin: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
child: ListTile(
leading: CircleAvatar(
backgroundColor: Colors.teal,
child: Text(
user['id'].toString(),
style: const TextStyle(color: Colors.white),
),
),
title: Text(user['name']),
subtitle: Text(user['email']),
),
);
},
),
);
}}
